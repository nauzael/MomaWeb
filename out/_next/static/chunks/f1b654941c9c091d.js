(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69074,67881,e=>{"use strict";let t,a,r,s,n,l=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>l],69074);var o=e.i(43476),i=e.i(71645);function c(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var d=Symbol.for("react.lazy"),u=i[" use ".trim().toString()];function m(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===d&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var x=((n=i.forwardRef((e,t)=>{let{children:a,...r}=e;if(m(a)&&"function"==typeof u&&(a=u(a._payload)),i.isValidElement(a)){var s;let e,n,l=(s=a,(n=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(n=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),o=function(e,t){let a={...t};for(let r in t){let s=e[r],n=t[r];/^on[A-Z]/.test(r)?s&&n?a[r]=(...e)=>{let t=n(...e);return s(...e),t}:s&&(a[r]=s):"style"===r?a[r]={...s,...n}:"className"===r&&(a[r]=[s,n].filter(Boolean).join(" "))}return{...e,...a}}(r,a.props);return a.type!==i.Fragment&&(o.ref=t?function(...e){return t=>{let a=!1,r=e.map(e=>{let r=c(e,t);return a||"function"!=typeof r||(a=!0),r});if(a)return()=>{for(let t=0;t<r.length;t++){let a=r[t];"function"==typeof a?a():c(e[t],null)}}}}(t,l):l),i.cloneElement(a,o)}return i.Children.count(a)>1?i.Children.only(null):null})).displayName="Slot.SlotClone",t=n,(a=i.forwardRef((e,a)=>{let{children:r,...s}=e;m(r)&&"function"==typeof u&&(r=u(r._payload));let n=i.Children.toArray(r),l=n.find(f);if(l){let e=l.props.children,r=n.map(t=>t!==l?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,o.jsx)(t,{...s,ref:a,children:i.isValidElement(e)?i.cloneElement(e,void 0,r):null})}return(0,o.jsx)(t,{...s,ref:a,children:r})})).displayName="Slot.Slot",a),p=Symbol("radix.slottable");function f(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===p}var g=e.i(7670);let h=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,b=g.clsx;var y=e.i(47163);let j=(r="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==s?void 0:s.variants)==null)return b(r,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:a,defaultVariants:n}=s,l=Object.keys(a).map(t=>{let r=null==e?void 0:e[t],s=null==n?void 0:n[t];if(null===r)return null;let l=h(r)||h(s);return a[t][l]}),o=e&&Object.entries(e).reduce((e,t)=>{let[a,r]=t;return void 0===r||(e[a]=r),e},{});return b(r,l,null==s||null==(t=s.compoundVariants)?void 0:t.reduce((e,t)=>{let{class:a,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...n,...o}[t]):({...n,...o})[t]===a})?[...e,a,r]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),v=i.forwardRef(({className:e,variant:t,size:a,asChild:r=!1,...s},n)=>(0,o.jsx)(r?x:"button",{className:(0,y.cn)(j({variant:t,size:a,className:e})),ref:n,...s}));v.displayName="Button",e.s(["Button",()=>v],67881)},10345,e=>{"use strict";var t=e.i(44215);async function a(){try{return await (0,t.fetchApi)("experiences/index.php")}catch(e){return console.error("Failed to load experiences from API:",e),[]}}async function r(e){try{return await (0,t.fetchApi)(`experiences/single.php?slug=${encodeURIComponent(e)}`)}catch(t){return console.error(`Failed to load experience ${e} from API:`,t),null}}async function s(e){try{return(await (0,t.fetchApi)("admin/experiences/upsert.php",{method:"POST",body:JSON.stringify({experience:e})})).experience}catch(e){throw console.error("Failed to save experience:",e),e}}async function n(e){try{await (0,t.fetchApi)("admin/experiences/delete.php",{method:"POST",body:JSON.stringify({slug:e})})}catch(e){throw console.error("Failed to delete experience:",e),e}}e.s(["deleteExperiencePersisted",()=>n,"getAllExperiencesPersisted",()=>a,"getExperiencePersisted",()=>r,"saveExperiencePersisted",()=>s])},67585,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let r=e.r(32061);function s({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new r.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,a)=>{"use strict";function r(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"encodeURIPath",{enumerable:!0,get:function(){return r}})},52157,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"PreloadChunks",{enumerable:!0,get:function(){return i}});let r=e.r(43476),s=e.r(74080),n=e.r(63599),l=e.r(9885),o=e.r(43369);function i({moduleIds:e}){if("undefined"!=typeof window)return null;let t=n.workAsyncStorage.getStore();if(void 0===t)return null;let a=[];if(t.reactLoadableManifest&&e){let r=t.reactLoadableManifest;for(let t of e){if(!r[t])continue;let e=r[t].files;a.push(...e)}}if(0===a.length)return null;let i=(0,o.getDeploymentIdQueryOrEmptyString)();return(0,r.jsx)(r.Fragment,{children:a.map(e=>{let a=`${t.assetPrefix}/_next/${(0,l.encodeURIPath)(e)}${i}`;return e.endsWith(".css")?(0,r.jsx)("link",{precedence:"dynamic",href:a,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,s.preload)(a,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return c}});let r=e.r(43476),s=e.r(71645),n=e.r(67585),l=e.r(52157);function o(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},c=function(e){let t={...i,...e},a=(0,s.lazy)(()=>t.loader().then(o)),c=t.loading;function d(e){let o=c?(0,r.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,d=i?s.Suspense:s.Fragment,u=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(l.PreloadChunks,{moduleIds:t.modules}):null,(0,r.jsx)(a,{...e})]}):(0,r.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(a,{...e})});return(0,r.jsx)(d,{...i?{fallback:o}:{},children:u})}return d.displayName="LoadableComponent",d}},70703,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return s}});let r=e.r(55682)._(e.r(69093));function s(e,t){let a={};"function"==typeof e&&(a.loader=e);let s={...a,...t};return(0,r.default)({...s,modules:s.loadableGenerated?.modules})}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},64830,e=>{"use strict";var t=e.i(43476);let a=(0,e.i(70703).default)(()=>e.A(46135),{loadableGenerated:{modules:[98866]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"h-[400px] w-full bg-stone-100 animate-pulse rounded-xl"})});e.s(["default",0,a])},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},28830,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(56909),s=e.i(69074),n=e.i(37727),l=e.i(3408),l=l,o=e.i(31278),i=e.i(7233),c=e.i(27612),d=e.i(3116),u=e.i(57688),m=e.i(18566),x=e.i(44215),p=e.i(10345),f=e.i(64830),g=e.i(55436),h=e.i(35501),b=e.i(67881);function y({isOpen:e,onClose:r,onSelect:s,title:l="Seleccionar Imagen"}){let[i,c]=(0,a.useState)([]),[d,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)("");(0,a.useEffect)(()=>{e&&y()},[e]);let y=async()=>{m(!0);try{let e=await (0,x.fetchApi)("gallery/index.php");c(e.images||[])}catch(e){console.error("Failed to load gallery images:",e)}finally{m(!1)}},j=i.filter(e=>(e.alt_text||"").toLowerCase().includes(p.toLowerCase())||e.url.toLowerCase().includes(p.toLowerCase()));return e?(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:r,children:(0,t.jsxs)("div",{className:"bg-white w-full max-w-5xl max-h-[90vh] rounded-[2.5rem] shadow-2xl flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"p-6 md:p-8 border-b border-stone-100 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-black text-stone-900",children:l}),(0,t.jsx)("p",{className:"text-stone-500 text-sm",children:"Elige una imagen de la Galería Infinita"})]}),(0,t.jsx)("button",{onClick:r,className:"p-2 hover:bg-stone-100 rounded-full transition-colors text-stone-400 hover:text-stone-900",children:(0,t.jsx)(n.X,{className:"w-6 h-6"})})]}),(0,t.jsxs)("div",{className:"p-4 md:px-8 border-b border-stone-50 bg-stone-50/50 flex flex-col md:flex-row gap-4 items-center",children:[(0,t.jsxs)("div",{className:"relative w-full md:max-w-md",children:[(0,t.jsx)(g.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-stone-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar imágenes...",value:p,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-stone-200 rounded-xl text-sm focus:ring-2 focus:ring-moma-green outline-none transition-all"})]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)(b.Button,{variant:"ghost",size:"sm",onClick:y,disabled:d,className:"text-stone-500",children:[d?(0,t.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin mr-2"}):null,"Actualizar"]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6 md:p-8",children:d&&0===i.length?(0,t.jsxs)("div",{className:"h-64 flex flex-col items-center justify-center text-stone-400 gap-4",children:[(0,t.jsx)(o.Loader2,{className:"w-8 h-8 animate-spin"}),(0,t.jsx)("p",{className:"font-medium",children:"Cargando galería..."})]}):j.length>0?(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:j.map(e=>(0,t.jsxs)("div",{onClick:()=>{s(e.url),r()},className:"group relative aspect-square bg-stone-100 rounded-2xl overflow-hidden cursor-pointer border border-stone-200 hover:border-moma-green hover:ring-2 hover:ring-moma-green/20 transition-all shadow-sm hover:shadow-md",children:[(0,t.jsx)(u.default,{src:(0,x.getImageUrl)(e.url.replace("/gallery/","/gallery/thumbs/")),alt:e.alt_text||"Imagen de la galería",fill:!0,sizes:"(max-width: 768px) 50vw, 20vw",className:"object-cover transition-transform group-hover:scale-110",onError:t=>{let a=t.target;a.src.includes("/thumbs/")&&(a.src=(0,x.getImageUrl)(e.url))}}),(0,t.jsx)("div",{className:"absolute inset-0 bg-moma-green/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,t.jsx)("div",{className:"bg-white px-3 py-1.5 rounded-full text-[10px] font-black uppercase text-stone-900 shadow-xl scale-90 group-hover:scale-100 transition-transform",children:"Seleccionar"})})]},e.id))}):(0,t.jsxs)("div",{className:"h-64 flex flex-col items-center justify-center text-stone-400 gap-4 border-2 border-dashed border-stone-100 rounded-3xl",children:[(0,t.jsx)(h.ImageIcon,{className:"w-12 h-12 opacity-20"}),(0,t.jsx)("p",{className:"font-medium italic",children:"No se encontraron imágenes"})]})}),(0,t.jsx)("div",{className:"p-4 md:px-8 border-t border-stone-100 bg-stone-50/30 flex justify-end",children:(0,t.jsx)(b.Button,{variant:"outline",onClick:r,className:"rounded-xl px-6",children:"Cerrar"})})]})}):null}function j({initialData:e}){let g=(0,m.useRouter)(),h=(0,a.useRef)(null),b=(0,a.useRef)(null),[j,v]=(0,a.useState)(!1),[N,w]=(0,a.useState)({title:e?.title||"",slug:e?.slug||"",description:e?.description||"",price_cop:e?.price_cop||"",price_usd:e?.price_usd||"",max_capacity:e?.max_capacity||"",includes:e?.includes||[],excludes:e?.excludes||[],includesText:(e?.includes||[]).join("\n"),excludesText:(e?.excludes||[]).join("\n"),location_name:e?.location_name||"",location_coords:e?.location_coords||{lat:4.5709,lng:-74.2973},location_lat:(e?.location_coords?.lat??4.5709).toString(),location_lng:(e?.location_coords?.lng??-74.2973).toString(),itinerary:e?.itinerary||[]}),[k,C]=(0,a.useState)(e?.image||null),[_,S]=(0,a.useState)(e?.gallery||[]),[P,L]=(0,a.useState)({current:0,total:0}),[O,R]=(0,a.useState)(!1),[E,I]=(0,a.useState)(null),[U,A]=(0,a.useState)({}),[T,z]=(0,a.useState)(!1),[D,M]=(0,a.useState)(!1),[F,W]=(0,a.useState)({isOpen:!1,target:"cover"}),$=(0,a.useRef)(null);(0,a.useEffect)(()=>{$.current&&($.current.style.height="auto",$.current.style.height=$.current.scrollHeight+"px")},[N.description]);let B=e=>{let{name:t,value:a}=e.target;w(e=>{let r={...e,[t]:a};return"title"!==t||e.slug&&e.slug!==e.title.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")||(r.slug=a.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")),r})},G=e=>{let{name:t,value:a}=e.target;w(e=>({...e,[t]:a}))},q=()=>{w(e=>({...e,itinerary:[...e.itinerary,{title:"",description:""}]}))},V=(e,t,a)=>{w(r=>{let s=[...r.itinerary];return s[e]={...s[e],[t]:a},{...r,itinerary:s}})},H=async e=>{let t=e.target.files?.[0];if(t){I(t.name);let e="image/heic"===t.type||"image/heif"===t.type||t.name.toLowerCase().endsWith(".heic")||t.name.toLowerCase().endsWith(".heif"),a=URL.createObjectURL(t);if(C(a),e){let e=new window.Image;e.onload=()=>{let t=document.createElement("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r?.drawImage(e,0,0),C(t.toDataURL("image/webp",.7)),URL.revokeObjectURL(a)},e.onerror=()=>{console.error("Failed to load HEIC image"),URL.revokeObjectURL(a)},e.src=a}else{let e=new FileReader;e.onload=async e=>{let t=new window.Image;t.src=e.target?.result,t.onload=()=>{let e=document.createElement("canvas");e.width=t.width,e.height=t.height;let r=e.getContext("2d");r?.drawImage(t,0,0),C(e.toDataURL("image/webp",.7)),URL.revokeObjectURL(a)}},e.readAsDataURL(t)}}},X=async e=>{let t=Array.from(e.target.files||[]);if(0!==t.length)for(let e of(L(e=>{let a=e.total>0&&e.current===e.total;return{current:a?0:e.current,total:(a?0:e.total)+t.length}}),t)){let t=URL.createObjectURL(e);if(A(a=>({...a,[t]:e.name})),S(e=>[...e,t]),"image/heic"===e.type||"image/heif"===e.type||e.name.toLowerCase().endsWith(".heic")||e.name.toLowerCase().endsWith(".heif")){let e=new window.Image;e.onload=()=>{let a=document.createElement("canvas");a.width=e.width,a.height=e.height;let r=a.getContext("2d");r?.drawImage(e,0,0);let s=a.toDataURL("image/webp",.7);S(e=>e.map(e=>e===t?s:e)),URL.revokeObjectURL(t),L(e=>({...e,current:e.current+1}))},e.onerror=()=>{console.error("Failed to load HEIC gallery image"),URL.revokeObjectURL(t),L(e=>({...e,current:e.current+1}))},e.src=t}else{let a=new FileReader;a.onload=async e=>{let a=new window.Image;a.src=e.target?.result,a.onload=()=>{let e=document.createElement("canvas");e.width=a.width,e.height=a.height;let r=e.getContext("2d");r?.drawImage(a,0,0);let s=e.toDataURL("image/webp",.7);S(e=>e.map(e=>e===t?s:e)),URL.revokeObjectURL(t),L(e=>({...e,current:e.current+1}))}},a.readAsDataURL(e)}}},K=async t=>{if(t.preventDefault(),k?.startsWith("blob:")||_.some(e=>e.startsWith("blob:")))return void alert(`Las im\xe1genes se est\xe1n optimizando (${P.current}/${P.total}). Por favor espera un segundo...`);v(!0);try{let t=k;if(k&&(k.startsWith("data:")||k.startsWith("blob:"))){let e=await fetch(k),a=await e.blob(),r=new FormData;r.append("file",a,E||"experience.webp"),t=(await (0,x.fetchApi)("upload.php",{method:"POST",body:r})).url}let a=async e=>{if(!e)return null;if(e.startsWith("data:")||e.startsWith("blob:"))try{let t=await fetch(e),a=await t.blob(),r=new FormData,s=U[e]||`gallery_${Math.random().toString(36).substr(2,9)}.webp`;return r.append("file",a,s),(await (0,x.fetchApi)("upload.php",{method:"POST",body:r})).url}catch(t){return console.error("Error uploading gallery image",t),e.startsWith("data:")?e:null}return e},r=(await Promise.all(_.filter(e=>!!e).map(async e=>{let t=await a(e);return!t&&e?(console.warn("Image upload failed but preserving URL as last resort"),e):t}))).filter(e=>!!e);if(_.length>0&&0===r.length)throw Error("No se pudieron procesar las imágenes de la galería");let s="string"==typeof N.includesText?N.includesText:"",n="string"==typeof N.excludesText?N.excludesText:"",l=s?s.split("\n").map(e=>e.trim()).filter(e=>e.length>0):Array.isArray(N.includes)?N.includes:[],o=n?n.split("\n").map(e=>e.trim()).filter(e=>e.length>0):Array.isArray(N.excludes)?N.excludes:[],i=Number(N.location_lat),c=Number(N.location_lng),d={lat:Number.isFinite(i)?i:4.5709,lng:Number.isFinite(c)?c:-74.2973},u={...N,id:e?.id,image:t||"",gallery:r,price_cop:Number(N.price_cop)||0,price_usd:Number(N.price_usd)||0,max_capacity:Number(N.max_capacity)||0,includes:l.length>0?l:["Guía profesional","Transporte ida y vuelta","Seguro de viaje"],excludes:o.length>0?o:["Gastos personales","Propinas"],location_coords:d};await (0,p.saveExperiencePersisted)(u),R(!0),setTimeout(()=>{g.push("/admin/experiences")},2e3)}catch(e){console.error("Error during submission",e),alert("Error al guardar: "+(e instanceof Error?e.message:"Unknown error"))}finally{v(!1)}};return(0,t.jsxs)("div",{className:"bg-white p-8 md:p-12 rounded-[2.5rem] shadow-sm border border-[#eef1f4]",children:[(0,t.jsxs)("form",{onSubmit:K,className:"space-y-12",children:[(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("h2",{className:"text-xl font-black text-stone-900 flex items-center gap-3",children:[(0,t.jsx)("span",{className:"w-8 h-8 bg-moma-green/10 text-moma-green rounded-lg flex items-center justify-center text-sm italic",children:"01"}),"Información Básica"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"Ubicación (nombre)"}),(0,t.jsx)("input",{type:"text",name:"location_name",value:N.location_name,onChange:B,className:"w-full bg-[#f5fbf9] border-none rounded-xl px-4 py-3 text-[#1a1a1a] font-medium focus:ring-2 focus:ring-moma-green transition-all",placeholder:"Leticia, Amazonas"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"Título de la Experiencia"}),(0,t.jsx)("input",{type:"text",name:"title",value:N.title,onChange:B,className:"w-full bg-[#f5fbf9] border-none rounded-xl px-4 py-3 text-[#1a1a1a] font-bold focus:ring-2 focus:ring-moma-green transition-all",placeholder:"Ej: Amazonas Mágico",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"Slug (URL)"}),(0,t.jsx)("input",{type:"text",name:"slug",value:N.slug,onChange:B,className:"w-full bg-[#f5fbf9] border-none rounded-xl px-4 py-3 text-[#1a1a1a] font-bold focus:ring-2 focus:ring-moma-green transition-all",placeholder:"amazonas-magico",required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"Descripción"}),(0,t.jsx)("textarea",{ref:$,rows:4,name:"description",value:N.description,onChange:B,className:"w-full bg-[#f5fbf9] border-none rounded-xl px-4 py-3 text-[#1a1a1a] font-medium focus:ring-2 focus:ring-moma-green transition-all resize-none overflow-hidden",placeholder:"Describe los detalles de esta aventura...",required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-8 pt-6 border-t border-stone-50",children:[(0,t.jsxs)("h2",{className:"text-xl font-black text-stone-900 flex items-center gap-3",children:[(0,t.jsx)("span",{className:"w-8 h-8 bg-moma-green/10 text-moma-green rounded-lg flex items-center justify-center text-sm italic",children:"02"}),"Logística y Detalles"]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-10",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"Incluye"}),(0,t.jsx)("textarea",{rows:6,name:"includesText",value:N.includesText,onChange:B,className:"w-full bg-[#f5fbf9] border-none rounded-2xl px-5 py-4 text-[#1a1a1a] text-sm font-medium focus:ring-2 focus:ring-moma-green transition-all",placeholder:"Guía profesional\nTransporte ida y vuelta\nSeguro de viaje"}),(0,t.jsxs)("p",{className:"text-[11px] text-stone-400 flex items-center gap-1.5 ml-1",children:[(0,t.jsx)(i.Plus,{className:"w-3 h-3"})," Escribe un elemento por línea."]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"No Incluye"}),(0,t.jsx)("textarea",{rows:6,name:"excludesText",value:N.excludesText,onChange:B,className:"w-full bg-[#f5fbf9] border-none rounded-2xl px-5 py-4 text-[#1a1a1a] text-sm font-medium focus:ring-2 focus:ring-moma-green transition-all",placeholder:"Gastos personales\nPropinas"}),(0,t.jsxs)("p",{className:"text-[11px] text-stone-400 flex items-center gap-1.5 ml-1",children:[(0,t.jsx)(n.X,{className:"w-3 h-3"})," Escribe un elemento por línea."]})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-10",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"Precio COP"}),(0,t.jsx)("input",{type:"number",name:"price_cop",value:N.price_cop,onChange:B,className:"w-full bg-[#f5fbf9] border-none rounded-2xl px-5 py-4 text-[#1a1a1a] font-black text-lg focus:ring-2 focus:ring-moma-green transition-all",placeholder:"2500000"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"Precio USD"}),(0,t.jsx)("input",{type:"number",name:"price_usd",value:N.price_usd,onChange:B,className:"w-full bg-[#f5fbf9] border-none rounded-2xl px-5 py-4 text-[#1a1a1a] font-black text-lg focus:ring-2 focus:ring-moma-green transition-all",placeholder:"650"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"Capacidad Máx"}),(0,t.jsx)("input",{type:"number",name:"max_capacity",value:N.max_capacity,onChange:B,className:"w-full bg-[#f5fbf9] border-none rounded-2xl px-5 py-4 text-[#1a1a1a] font-black text-lg focus:ring-2 focus:ring-moma-green transition-all",placeholder:"8"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-8 pt-6 border-t border-stone-50",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-xl font-black text-stone-900 flex items-center gap-3",children:[(0,t.jsx)("span",{className:"w-8 h-8 bg-moma-green/10 text-moma-green rounded-lg flex items-center justify-center text-sm italic",children:"03"}),"Itinerario"]}),(0,t.jsxs)("button",{type:"button",onClick:q,className:"bg-moma-green/10 text-moma-green px-4 py-2 rounded-xl font-bold text-sm hover:bg-moma-green/20 transition-all flex items-center gap-2",children:[(0,t.jsx)(i.Plus,{className:"w-4 h-4"})," Agregar Día/Etapa"]})]}),(0,t.jsx)("div",{className:"space-y-6",children:0===N.itinerary.length?(0,t.jsxs)("div",{className:"bg-stone-50 border-2 border-dashed border-stone-100 rounded-[2rem] p-12 text-center text-stone-400",children:[(0,t.jsx)(d.Clock,{className:"w-10 h-10 mx-auto mb-4 opacity-20"}),(0,t.jsx)("p",{className:"font-medium italic",children:"Aún no hay etapas en el itinerario"}),(0,t.jsx)("button",{type:"button",onClick:q,className:"text-moma-green text-sm font-bold mt-2 hover:underline",children:"+ Crear primer día"})]}):N.itinerary.map((e,a)=>(0,t.jsxs)("div",{className:"bg-[#fcfdfd] border border-stone-100 rounded-[2rem] p-6 md:p-8 space-y-4 relative group",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{w(e=>({...e,itinerary:e.itinerary.filter((e,t)=>t!==a)}))},className:"absolute top-6 right-6 p-2 text-stone-300 hover:text-red-500 transition-colors",children:(0,t.jsx)(c.Trash2,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2 max-w-sm",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-stone-400 uppercase tracking-[0.2em]",children:"Día / Horario"}),(0,t.jsx)("input",{type:"text",value:e.title,onChange:e=>V(a,"title",e.target.value),className:"w-full bg-white border border-stone-100 rounded-xl px-4 py-2 text-[#1a1a1a] font-bold focus:ring-2 focus:ring-moma-green transition-all",placeholder:"Ej: Día 1 - Llegada"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-stone-400 uppercase tracking-[0.2em]",children:"Actividad / Etapa"}),(0,t.jsx)("textarea",{rows:3,value:e.description,onChange:e=>V(a,"description",e.target.value),className:"w-full bg-white border border-stone-100 rounded-xl px-4 py-3 text-[#1a1a1a] font-medium focus:ring-2 focus:ring-moma-green transition-all",placeholder:"Describe lo que pasará en este momento..."})]})]})]},a))})]}),(0,t.jsxs)("div",{className:"space-y-8 pt-6 border-t border-stone-50",children:[(0,t.jsxs)("h2",{className:"text-xl font-black text-stone-900 flex items-center gap-3",children:[(0,t.jsx)("span",{className:"w-8 h-8 bg-moma-green/10 text-moma-green rounded-lg flex items-center justify-center text-sm italic",children:"04"}),"Geolocalización"]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-10",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"Latitud"}),(0,t.jsx)("input",{type:"number",step:"0.000001",name:"location_lat",value:N.location_lat,onChange:G,className:"w-full bg-[#f5fbf9] border-none rounded-xl px-4 py-3 text-[#1a1a1a] font-medium focus:ring-2 focus:ring-moma-green transition-all",placeholder:"4.5709"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"Longitud"}),(0,t.jsx)("input",{type:"number",step:"0.000001",name:"location_lng",value:N.location_lng,onChange:G,className:"w-full bg-[#f5fbf9] border-none rounded-xl px-4 py-3 text-[#1a1a1a] font-medium focus:ring-2 focus:ring-moma-green transition-all",placeholder:"-74.2973"})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"Buscar ubicación"}),(0,t.jsx)("input",{type:"text",placeholder:"Ej: Parque Tayrona, Colombia",onKeyDown:async e=>{if("Enter"!==e.key)return;e.preventDefault();let t=e.currentTarget.value.trim();if(t)try{let e=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(t)}&limit=1`),a=await e.json();if(Array.isArray(a)&&a.length>0){let e=a[0],t=parseFloat(e.lat),r=parseFloat(e.lon);Number.isNaN(t)||Number.isNaN(r)||w(e=>({...e,location_lat:t.toString(),location_lng:r.toString(),location_coords:{lat:t,lng:r}}))}else alert("No se encontró la ubicación. Intenta con otro nombre.")}catch(e){console.error(e),alert("Error al buscar la ubicación. Intenta nuevamente.")}},className:"w-full bg-[#f5fbf9] border-none rounded-xl px-4 py-3 text-[#1a1a1a] font-medium focus:ring-2 focus:ring-moma-green transition-all"}),(0,t.jsx)("p",{className:"text-xs text-stone-400",children:"Presiona Enter para buscar por nombre de lugar."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"Ajuste Manual en Mapa"}),(0,t.jsx)("div",{className:"h-[350px] w-full rounded-[2.5rem] border border-[#eef1f4] overflow-hidden shadow-inner",children:(0,t.jsx)(f.default,{coords:[Number(N.location_lat)||4.5709,Number(N.location_lng)||-74.2973],popupText:N.title||"Nueva experiencia",onCoordsChange:([e,t])=>{w(a=>({...a,location_lat:e.toString(),location_lng:t.toString(),location_coords:{lat:e,lng:t}}))}})})]})]})]}),(0,t.jsxs)("div",{className:"space-y-8 pt-6 border-t border-stone-50",children:[(0,t.jsxs)("h2",{className:"text-xl font-black text-stone-900 flex items-center gap-3",children:[(0,t.jsx)("span",{className:"w-8 h-8 bg-moma-green/10 text-moma-green rounded-lg flex items-center justify-center text-sm italic",children:"05"}),"Contenido Multimedia"]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-10",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"Imagen de Portada"}),(0,t.jsx)("input",{type:"file",ref:h,onChange:H,className:"hidden",accept:"image/*,.heic,.heif"}),(0,t.jsx)("div",{onClick:()=>W({isOpen:!0,target:"cover"}),className:"border-2 border-dashed border-[#eef1f4] hover:border-moma-green bg-[#fcfdfd] rounded-[2rem] p-12 text-center cursor-pointer transition-all relative overflow-hidden group min-h-[400px] flex items-center justify-center",children:k?(0,t.jsxs)("div",{className:"absolute inset-0 w-full h-full",children:[(0,t.jsx)(u.default,{src:(0,x.getImageUrl)(k),alt:"Preview",fill:!0,unoptimized:!0,className:"object-cover transition-transform group-hover:scale-105"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)("div",{className:"bg-white p-4 rounded-full shadow-xl",children:(0,t.jsx)(s.Upload,{className:"w-6 h-6 text-[#1a1a1a]"})})})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-[#eef1f4] rounded-full flex items-center justify-center mb-4 group-hover:bg-moma-green/10 group-hover:text-moma-green transition-colors text-stone-400",children:(0,t.jsx)(l.default,{className:"w-8 h-8"})}),(0,t.jsx)("p",{className:"font-bold text-[#1a1a1a]",children:"Portada Principal"}),(0,t.jsx)("p",{className:"text-sm text-stone-400 mt-1",children:"Es el fondo principal del tour"})]})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("label",{className:"text-xs font-bold text-stone-400 uppercase tracking-widest",children:"Galería Carrusel"}),(0,t.jsx)("input",{type:"file",multiple:!0,ref:b,onChange:X,className:"hidden",accept:"image/*,.heic,.heif"}),(0,t.jsxs)("div",{className:"bg-[#fcfdfd] border border-stone-100 rounded-[2rem] p-6 min-h-[400px]",children:[P.total>0&&P.current<P.total&&(0,t.jsxs)("div",{className:"w-full mb-6 animate-pulse",children:[(0,t.jsxs)("div",{className:"flex justify-between text-[10px] font-black uppercase text-moma-green mb-2",children:[(0,t.jsx)("span",{children:"Optimizando galería..."}),(0,t.jsxs)("span",{children:[Math.round(P.current/P.total*100),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-stone-100 rounded-full h-1.5 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-moma-green h-full transition-all duration-300 ease-out",style:{width:`${P.current/P.total*100}%`}})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[_.map((e,a)=>(0,t.jsxs)("div",{className:"relative aspect-square rounded-2xl overflow-hidden group border border-[#eef1f4] shadow-sm",children:[(0,t.jsx)(u.default,{src:(0,x.getImageUrl)(e),alt:`Gallery ${a}`,fill:!0,unoptimized:!0,className:"object-cover"}),(0,t.jsx)("button",{type:"button",onClick:()=>{S(e=>e.filter((e,t)=>t!==a))},className:"absolute top-2 right-2 bg-red-500 text-white p-1.5 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",children:(0,t.jsx)(n.X,{className:"w-3.5 h-3.5"})})]},a)),(0,t.jsxs)("button",{type:"button",onClick:()=>W({isOpen:!0,target:"gallery"}),className:"aspect-square rounded-2xl border-2 border-dashed border-[#eef1f4] hover:border-moma-green hover:bg-[#f5fbf9] transition-all flex flex-col items-center justify-center text-stone-400 gap-2 group",children:[(0,t.jsx)(i.Plus,{className:"w-6 h-6 group-hover:scale-110 transition-transform"}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Añadir Foto"})]})]})]})]})]})]}),(0,t.jsxs)("div",{className:"pt-10 border-t border-stone-100 flex justify-end gap-6",children:[(0,t.jsx)("button",{type:"button",onClick:()=>g.back(),className:"px-10 py-4 rounded-2xl font-bold text-stone-500 hover:bg-stone-50 transition-all text-lg",children:"Cancelar"}),(0,t.jsxs)("button",{type:"submit",disabled:j,className:"bg-moma-green text-stone-900 px-12 py-4 rounded-2xl font-black text-lg hover:bg-moma-green/90 transition-all shadow-lg shadow-moma-green/20 disabled:opacity-50 flex items-center gap-3",children:[j?(0,t.jsx)(o.Loader2,{className:"w-6 h-6 animate-spin"}):(0,t.jsx)(r.Save,{className:"w-6 h-6"}),e?"Actualizar Experiencia":"Crear Experiencia"]})]})]}),(0,t.jsx)(y,{isOpen:T,onClose:()=>z(!1),onSelect:e=>C(e),title:"Elegir Portada"}),(0,t.jsx)(y,{isOpen:D,onClose:()=>M(!1),onSelect:e=>S(t=>[...t,e]),title:"Añadir a Galería"}),F.isOpen&&(0,t.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>W(e=>({...e,isOpen:!1})),children:(0,t.jsxs)("div",{className:"bg-white rounded-3xl p-8 max-w-sm w-full mx-4 shadow-2xl animate-in zoom-in-95 duration-300 relative",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:()=>W(e=>({...e,isOpen:!1})),className:"absolute top-4 right-4 p-2 hover:bg-stone-100 rounded-full text-stone-400 transition-colors",children:(0,t.jsx)(n.X,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"text-center space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-xl font-black text-stone-900",children:"Origen de Imagen"}),(0,t.jsx)("p",{className:"text-sm text-stone-500",children:"¿Cómo deseas añadir la fotografía?"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,t.jsxs)("button",{onClick:()=>{W(e=>({...e,isOpen:!1})),"cover"===F.target?h.current?.click():b.current?.click()},className:"flex items-center gap-4 p-4 bg-[#f5fbf9] hover:bg-moma-green/5 border border-stone-100 hover:border-moma-green rounded-2xl transition-all group",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center shadow-sm text-moma-green group-hover:scale-110 transition-transform",children:(0,t.jsx)(s.Upload,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{className:"font-bold text-stone-900",children:"Subir Nueva"}),(0,t.jsx)("p",{className:"text-[10px] text-stone-400 uppercase font-black",children:"Desde tu dispositivo"})]})]}),(0,t.jsxs)("button",{onClick:()=>{W(e=>({...e,isOpen:!1})),"cover"===F.target?z(!0):M(!0)},className:"flex items-center gap-4 p-4 bg-stone-50 hover:bg-stone-100 border border-stone-100 hover:border-stone-200 rounded-2xl transition-all group",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-white rounded-xl flex items-center justify-center shadow-sm text-stone-600 group-hover:scale-110 transition-transform",children:(0,t.jsx)(l.default,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{className:"font-bold text-stone-900",children:"De la Galería"}),(0,t.jsx)("p",{className:"text-[10px] text-stone-400 uppercase font-black",children:"Imágenes ya subidas"})]})]})]})]})]})}),O&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>{R(!1),g.push("/admin/experiences")},children:(0,t.jsx)("div",{className:"bg-white rounded-3xl p-8 max-w-md w-full mx-4 shadow-2xl animate-in zoom-in-95 duration-300",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center animate-in zoom-in duration-500",children:(0,t.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-2xl font-black text-stone-900 mb-2",children:e?.id?"¡Actualizado!":"¡Creado!"}),(0,t.jsx)("p",{className:"text-stone-600",children:e?.id?"La experiencia se actualizó correctamente":"La experiencia se creó exitosamente"})]}),(0,t.jsx)("p",{className:"text-sm text-stone-400",children:"Redirigiendo en 2 segundos..."}),(0,t.jsx)("button",{onClick:()=>{R(!1),g.push("/admin/experiences")},className:"mt-4 bg-moma-green text-stone-900 px-6 py-3 rounded-xl font-bold hover:bg-moma-green/90 transition-all",children:"Ir a Experiencias"})]})})})]})}e.s(["default",()=>j],28830)}]);